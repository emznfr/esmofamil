<!doctype html>
<html lang="fa" id="htmlTag">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Nom & Prénom — Multiplayer</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:0;background:#f6f7fb;direction:rtl}
    .wrap{max-width:980px;margin:0 auto;padding:14px}
    .card{background:#fff;border-radius:16px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,.06);margin-bottom:12px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>*{flex:1;min-width:160px}
    input,button,select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #e5e7eb;font-size:14px;box-sizing:border-box}
    button{border:none;background:#2563eb;color:#fff;font-weight:800;cursor:pointer}
    button.secondary{background:#eef2ff;color:#1e3a8a}
    .lang-select { margin-bottom: 10px; background: #fff; font-weight: bold; border: 2px solid #2563eb; }
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#f1f5ff;color:#1e3a8a;font-weight:900;font-size:12px}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .answer{border:1px solid #e5e7eb;border-radius:12px;padding:10px;background:#fbfdff;margin-bottom:8px}
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px solid #eef2f7;padding:8px;text-align:center;font-size:14px}
    [dir="ltr"] th, [dir="ltr"] td { text-align: left; }
  </style>
</head>
<body>
<div class="wrap">

  <select id="langSelector" class="lang-select">
    <option value="fa">فارسی (Persian)</option>
    <option value="en">English</option>
    <option value="fr">Français</option>
  </select>

  <div class="card">
    <h1 id="t_title">اسم و فامیل</h1>
    <div class="row">
      <input id="name" placeholder="نام شما" />
      <input id="code" placeholder="کد اتاق" />
    </div>
    <div class="row" style="margin-top:8px">
      <button id="createBtn">ساخت اتاق</button>
      <button id="joinBtn" class="secondary">ورود به اتاق</button>
    </div>
    <div class="muted" id="status">—</div>
  </div>

  <div class="card">
    <div class="row">
      <button id="startBtn" class="secondary">شروع راند (میزبان)</button>
      <button id="endBtn" style="background:#ef4444">پایان راند</button>
    </div>
    <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
      <span class="pill"><span id="t_room">اتاق</span>: <span id="roomCode">—</span></span>
      <span class="pill"><span id="t_status">وضعیت</span>: <span id="roomStatus">—</span></span>
      <span class="pill"><span id="t_letter">حرف</span>: <span id="roomLetter">—</span></span>
    </div>
  </div>

  <div class="card">
    <h1 id="t_yourAns">پاسخ‌های شما</h1>
    <div class="grid" id="formGrid"></div>
    <button id="submitBtn" style="margin-top:10px">ارسال پاسخ‌ها</button>
  </div>

  <div class="card">
    <h1 id="t_allAns">پاسخ‌های همه بازیکنان</h1>
    <div class="answers" id="answersList"></div>
  </div>

  <div class="card">
    <h1 id="t_scores">جدول امتیازات</h1>
    <table>
      <thead><tr><th id="t_pName">بازیکن</th><th id="t_pTotal">کل</th><th id="t_pRound">راند</th></tr></thead>
      <tbody id="scoresBody"></tbody>
    </table>
  </div>

</div>

<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();
  let currentLang = 'fa';

  const translations = {
    fa: {
      title: "اسم و فامیل", namePl: "نام شما", codePl: "کد اتاق", create: "ساخت اتاق", join: "ورود",
      start: "شروع راند", end: "پایان راند", room: "اتاق", status: "وضعیت", letter: "حرف",
      yourAns: "پاسخ‌های شما", allAns: "پاسخ‌های همه", scores: "جدول امتیازات",
      pName: "بازیکن", pTotal: "کل", pRound: "راند", send: "ارسال پاسخ‌ها", dir: "rtl"
    },
    en: {
      title: "Name & Surname", namePl: "Your Name", codePl: "Room Code", create: "Create Room", join: "Join",
      start: "Start Round", end: "End Round", room: "Room", status: "Status", letter: "Letter",
      yourAns: "Your Answers", allAns: "All Submissions", scores: "Leaderboard",
      pName: "Player", pTotal: "Total", pRound: "Round", send: "Submit Answers", dir: "ltr"
    },
    fr: {
      title: "Nom & Prénom", namePl: "Votre Nom", codePl: "Code Salle", create: "Créer", join: "Rejoindre",
      start: "Démarrer", end: "Finir", room: "Salle", status: "Statut", letter: "Lettre",
      yourAns: "Vos Réponses", allAns: "Réponses", scores: "Scores",
      pName: "Joueur", pTotal: "Total", pRound: "Manche", send: "Envoyer", dir: "ltr"
    }
  };

  function updateLanguage(lang) {
    currentLang = lang;
    const t = translations[lang];
    document.getElementById("htmlTag").dir = t.dir;
    document.getElementById("t_title").textContent = t.title;
    document.getElementById("name").placeholder = t.namePl;
    document.getElementById("code").placeholder = t.codePl;
    document.getElementById("createBtn").textContent = t.create;
    document.getElementById("joinBtn").textContent = t.join;
    document.getElementById("startBtn").textContent = t.start;
    document.getElementById("endBtn").textContent = t.end;
    document.getElementById("t_room").textContent = t.room;
    document.getElementById("t_status").textContent = t.status;
    document.getElementById("t_letter").textContent = t.letter;
    document.getElementById("t_yourAns").textContent = t.yourAns;
    document.getElementById("t_allAns").textContent = t.allAns;
    document.getElementById("t_scores").textContent = t.scores;
    document.getElementById("t_pName").textContent = t.pName;
    document.getElementById("t_pTotal").textContent = t.pTotal;
    document.getElementById("t_pRound").textContent = t.pRound;
    document.getElementById("submitBtn").textContent = t.send;
  }

  document.getElementById("langSelector").onchange = (e) => updateLanguage(e.target.value);
  updateLanguage('fa'); // پیش‌فرض فارسی

  // ادامه کدهای Socket.io (همان کدهایی که در پیام قبلی برایتان اصلاح کردم)
  // ... (توابع renderForm، addOrUpdateAnswerCard و غیره را اینجا قرار دهید)
</script>
</body>
</html>
